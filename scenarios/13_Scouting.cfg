#textdomain wesnoth-A_New_Order
[scenario]
    name = _ "Scouting"
    id=13_Scouting
    next_scenario=30_Final
    {INTRO_AND_SCENARIO_MUSIC the_deep_path.ogg wanderer.ogg}
    {EXTRA_SCENARIO_MUSIC peaceful/exploration.ogg}
    {EXTRA_SCENARIO_MUSIC peaceful/the_silver_tree.ogg}
    {EXTRA_SCENARIO_MUSIC silvan_sanctuary.ogg}
    {EXTRA_SCENARIO_MUSIC strings_wings_and_things.ogg}
    {EXTRA_SCENARIO_MUSIC journeys_end.ogg}
    map_data="{~add-ons/A_New_Order/maps/StrategicalRaedwood.map}"

    turns=-1 # i.e. unlimited

    victory_when_enemies_defeated=no

    [event]
        name=preload
        id=scouting_reme_check
        first_time_only=no
        {IF ano_bontom_location equals yes}
        {IF_HAVE_UNIT_ANY (Reme Carrenemoe)}
        {IF ano_strateg_pos greater_than_equal_to 3}
        {IF ano_reme_saved equals no}
        {VARIABLE ano_reme_saved yes}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
    [/event]

    [story]
        {IF ano_strateg_pos equals 1}
        [part]
            story=_"After leaving the Forest of Raedwood, Gawen and his companions found themselves faced with a problem: what to do next and how to fulfill the request of Mithrandil. Gawen wasn't sure what it meant to 'find the real reason behind the Akladian-Orcish alliance' and definitely had no idea how to accomplish that."
        [/part]
        {ELSE_IF ano_strateg_pos equals 2}
        [part]
            #po: Spoken by Lorin
            story=_"I am still confused. When I saw Gawen, at first I did not recognize him. He had changed from the last time I saw him. He was just a kid then, but now he looks more like a young man... an amazing change in just a few months."
            background=story_images/lorin_alone_sharp.png
        [/part]
        [part]
            story=_"...and now he keeps the company of underlings... an underling child who tries to behave like a woman, an underling man who looks like a veteran of many battles, underling soldiers, and even worse: elves. The green devils. But since I have been amongst underlings for months myself, this moves me much less than I would have thought."
            background=story_images/lorin_alone_sharp.png
        [/part]
        [part]
            story=_"Looking at him, I keep on thinking about what the oracle once told me; I am starting to dread those thoughts. When his father died, I thought that everything - well, almost everything - the Oracle had told me were lies, but now... now I am scared and I try not to think about it. But it keeps coming back."
            background=story_images/lorin_alone_sharp.png
        [/part]
        {ELSE_IF ano_strateg_pos equals 3}
        [part]
            story=_"Gawen ordered his soldiers to march quickly to the temporary base that had been established in the plains north of Barnon. He was afraid that more enemy forces would arrive, and wanted to tend to his wounded."
        [/part]
        {ELSE_IF ano_strateg_pos equals 4}
        [part]
            story=_"Fighting in the swamps of Saorduc had not made anyone happy and Gawen's soldiers were delighted to leave the frozen fens. They were all mired in a strange mix of mud and snow, and this was not improving their mood."
        [/part]
        {ELSE_IF ano_strateg_pos equals 5}
        [part]
            story=_"After seeing the atrocities committed by the orcs, Gawen's soldiers were unusually silent. None joked nor sang, as had been the norm after their last few battles. Each seemed to be thinking about their own families, their wives and children."
        [/part]
        {ELSE}
        {IF ano_reme_saved equals yes}
        [part]
            #po: Spoken by Reme Carrenemoe
            story=_"I am finally free! I still can hardly believe it. Not only am I free, but also Gawen, my king, is alive. It is a very real relief for me; the thought that I had abandoned him during the Battle of Barnon has haunted me for weeks now."
            # TODO: come up with a better version of this to use as a background: https://github.com/cooljeanius/ANO_art/blob/main/stare/story_images/reme/reme_alone.png
        [/part]
        {IF ano_lorin_joined equals yes}
        [part]
            story=_"I am surprised that he is surrounded by Underlings. But then, Gawen has demanded that I should never use that word again, that I should start to think of them as 'Wesnothians'. I think the girl with red hair has a crush on Gawen, and despite Lorin calling her 'a mite of a child' she is a woman already, and quite pretty."
        [/part]
        {ELSE} # no Lorin yet:
        [part]
            story=_"I am surprised that he is surrounded by Underlings. But then, Gawen has demanded that I should never use that word again, that I should start to think of them as 'Wesnothians'. I think the girl with red hair has a crush on Gawen, and despite her youth, she is a woman already, and quite pretty."
        [/part]
        {END_IF}
        {ELSE}
        [part]
            story=_"Failing to save Reme left Gawen feeling devastated. The news about Reme's death reached Gawen's temporary base soon after, throwing all into a somber melancholy."
        [/part]
        {END_IF}
        {FOUR_END_IFs}
        {END_IF}

        # If the player SOMEHOW misses all the orcs, throw them a bone.

        {IF ano_lorin_joined equals yes}
        {IF ano_saorduc_visited equals yes}
        {IF ano_barnon_visited equals yes}
        {IF ano_orcs_visited equals yes}
        {IF ano_found_news_orcs equals no}
        {IF ano_bontom_visited equals yes}
        [part]
            story=_ "Bitter and depressed, having failed to interrogate a single orc leader who knew anything of substance, Gawen and his troops headed home toward Freetown. Along the way, they found a near-frozen orc, dying in the snow. 'Grekulak', it said, and then expired."
        [/part]
        {VARIABLE ano_found_news_orcs yes} # FIXME: story is wrong place to set this
        {ELSE}
        {IF ano_reme_prisoned equals no}
        [part]
            story=_ "Bitter and depressed, having failed to interrogate a single orc leader who knew anything of substance, Gawen and his troops headed home toward Freetown. Along the way, they found a near-frozen orc, dying in the snow. 'Grekulak', it said, and then expired."
        [/part]
        {VARIABLE ano_found_news_orcs yes} # FIXME: story is wrong place to set this
        {END_IF_WITHOUT_ELSE}
        {END_IF}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}

        {IF ano_lorin_knows_about_roe equals yes}
        {IF_HAVE_UNIT_ANY (Rob Roe)}
        [part]
            story=_"Rob Roe was not amongst Gawen's soldiers. He disappeared one night and no one, not even the outlaws in Gawen's army, knew the reasons of Roe's sudden disappearance. Outlaws were startled by the event and many of them refused to follow Gawen's orders any more."
        [/part]
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
    [/story]

#define BARNON_PEASANT_ANSWERS IMG
    {IF ano_opt equals stop}
    {VARIABLE ano_continue no}
    {ELSE_IF ano_opt equals orcs}
    {MESSAGE (narrator) ({IMG}) () _"I've seen a lot of orcs lately. They are going here and there, and have been surprisingly disciplined and well-behaved considering what I've heard about orcs. Well, yes, they killed and ate three of our cows and took our only horse, but that's what one can expect from any soldiers. Some orcish unit is garrisoned near Barnon, south from here."}
    {ELSE_IF ano_opt equals reme}
    {MESSAGE (narrator) ({IMG}) () _"Reme? No, I have not heard about him."}
    {ELSE_IF ano_opt equals bontom}
    # FIXME: since Bontom's coordinates are randomly generated (see S11), it might not actually be to the west of this village:
    {MESSAGE (narrator) ({IMG}) () _"Bontom? Of course I know about it. It is a nice place a little bit west from here! My wife is from that area."}
#ifdef DEBUG_MODE
    {IF_DEBUG_MODE_IS_ACTUALLY_ON}
    {DEBUGMSG1 "Placing Bontom image..."}
    {END_IF_WITHOUT_ELSE}
#endif
    {PLACE_IMAGE (terrain/village/camp.png) $bontom_x $bontom_y}
    [scroll_to]
        x=$bontom_x
        y=$bontom_y
        highlight=yes
    [/scroll_to]
#ifdef DEBUG_MODE
    [delay]
        time=123
    [/delay]
#endif
    {VARIABLE ano_tmp_y 0}
    {VARIABLE_OP ano_tmp_y add $bontom_y}
    {VARIABLE_OP ano_tmp_y add 1}
#ifdef DEBUG_MODE
    {IF_DEBUG_MODE_IS_ACTUALLY_ON}
    {DEBUGMSG1 "Placing Bontom label..."}
    {END_IF_WITHOUT_ELSE}
#endif
    {LABEL $bontom_x $bontom_y (_"Bontom")}
    {CLEAR_VARIABLE ano_tmp_y}
    {VARIABLE ano_bontom_location yes}
    [delay]
        time=123
    [/delay]
    {ELSE_IF ano_opt equals fight}
    {IF ano_barnon_fight equals yes}
    {MESSAGE (narrator) ({IMG}) () _"No offense, but you've already asked me that question."}
    {ELSE}
    {VARIABLE ano_barnon_fight yes}
    {MESSAGE (narrator) ({IMG}) () _"Well, and what do you propose in exchange?"}
    {MSGOPTI3 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"What about this:")
    (_"If not, I will burn down this village.") (burn)
    (_"I will pay you in gold.") (gold)
    (_"A chance to fight against orcs and Akladians.") (chance)
    }
    {IF ano_opt equals gold}
    {MESSAGE (narrator) ({IMG}) () _"No offense, but I value my life more than gold."}
    {ELSE_IF ano_opt equals burn}
    {MESSAGE (narrator) ({IMG}) () _"That is supposed to convince me?!? Go away, little butcher. I will talk to you no more!"}
    {VARIABLE ano_butcher yes}
    {ELSE}
    {MESSAGE (narrator) ({IMG}) () _"And this is a good reason, because...?"}
    {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Because...")
    (_"You may have some fun!") (fun)
    (_"You will earn some gold in process!") (gold)
    (_"People unwilling to fight for freedom aren't worthy of it. Are you?") (freedom)
    (_"What, are you a coward? Afraid of a few orcs?") (chance)
    }

    {IF ano_opt equals freedom}
    {MESSAGE (narrator) ({IMG}) () _"Well... yes, why not? One of our boys can really handle a bow. You might have some use for him."}
    [unit]
        type=Bowman
        id=Ringo
        #po: I guess because the default Bowman portrait looks kinda like Ringo Starr of the Beatles?
        name=_"Ringo"
        x=11
        y=22
        side=1
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_DEXTROUS}
        [/modifications]
    [/unit]
    {ELSE}
    {MESSAGE (narrator) ({IMG}) () _"Ha, ha, and I thought you were serious."}
    {END_IF}
    {TWO_END_IFs}
    {END_IF}
    #IMPOSSIBLE
    {ELSE}
    # (???)
    {FOUR_END_IFs}
    {END_IF}
#enddef

#define CROSS_PEASANT_ANSWERS IMG
    {IF ano_opt equals stop}
    {VARIABLE ano_continue no}
    {ELSE_IF ano_opt equals orcs}
    {MESSAGE (narrator) ({IMG}) () _"Orcs? They were here, but they left in hurry. They were pillaging villages to the east of us. They were headed for a place called Haeltin, and I've heard they were defeated there by some woman."}
    {IF ano_lorin_joined equals yes}
    {MSGW_Lorin _"Some woman? SOME WOMAN? That freckled kid might be SOME woman when she grows up, but not me. I am a Lady, LADY Lorin!"}
    {ELSE}
    {MSGW_Gawen _"Ah, that must be that 'She-wolf of Haeltin' you mentioned, Ruvio. Will have to meet her."}
    {END_IF}
    {ELSE_IF ano_opt equals reme}
    {MESSAGE (narrator) ({IMG}) () _"Reme? No, I have not heard about him."}
    {ELSE_IF ano_opt equals bontom}
    {MESSAGE (narrator) ({IMG}) () _"Bontom? It is somewhere in the south-west. I think. In one of the villages south of here people might know more about its exact location."}
    {ELSE_IF ano_opt equals fight}
    {MESSAGE (narrator) ({IMG}) () _"If I were younger, then I might have said yes, why not, but I am really too old for adventure seeking now."}
    #IMPOSSIBLE
    {ELSE}
    # (???)
    {FOUR_END_IFs}
    {END_IF}
#enddef

#define HILL_PEASANT_ANSWERS IMG
    {IF ano_opt equals stop}
    {VARIABLE ano_continue no}
    {ELSE_IF ano_opt equals orcs}
    {MESSAGE (narrator) ({IMG}) () _"Orcs? Da orcs were in plains pillagin' and burnin'. They are big and bad and you should avoid them, boy."}
    {ELSE_IF ano_opt equals reme}
    {MESSAGE (narrator) ({IMG}) () _"Reme? What is Reme? Some kind of food?"}
    {MSGW_Gawen _"No, no, it's one of the Akladian lords, who..."}
    {MESSAGE (narrator) ({IMG}) () _"Oh, Akladian lords, yeah, I've heard about them. They are big and bad and you should avoid them, boy."}
    {ELSE_IF ano_opt equals bontom}
    {MESSAGE (narrator) ({IMG}) () _"A place called Bontom? Yeah, I've heard about that. It's somewhere in the south; maybe people living in villages more to the south would know more about it."}
    {ELSE_IF ano_opt equals fight}
    {IF ano_hill_join equals yes}
    {MESSAGE (narrator) ({IMG}) () _"I'm too old ta be leavin' my village, and the one boy who wanted to search for adventures already joined you."}
    {ELSE}
    {MESSAGE (narrator) ({IMG}) () _"I'm too old ta be leavin my village, but there is one boy who could fight for you, why not."}
    {MESSAGE (narrator) ({IMG}) ()
    _"One of local peasants joins your army. It's an untrained but LOYAL, STRONG, and RESILIENT unit."}
    {VARIABLE ano_hill_join yes}
    [unit]
        type=Peasant
        x=10
        y=22
        id=John the Baldhead
        name=_"John the Baldhead"
        side=1
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]
    [/unit]
    {END_IF}
    #IMPOSSIBLE
    {ELSE}
    # (???)
    {FOUR_END_IFs}
    {END_IF}
#enddef

#define RUVIOEXPLAINSTRATEG
    # can only be set to "yes" in S14b, "Bontom":
    {IF ano_reme_saved equals yes}
    # (no need to put anything here; Ruvio can skip ahead to one of the next conditionals instead)
    {ELSE}
    {IF ano_reme_saved equals no}
    # (no need to put anything here either; I'm moving the idea I had for here to the next conditional block instead)
    {ELSE}
    {IF ano_bontom_location equals yes}
    {MSGW_Ruvio _"Now that we know where your friend Reme is, we can go to that Bontom place the peasants told us about."}
    {ELSE_IF ano_reme_prisoned equals yes}
    {MSGW_Ruvio _"I guess we could ask peasants whether they know something about this Bontom place, where your friend Reme is being kept."}
    {ELSE}
    # ???: is it possible to reach this case? If so, how?
    {FOUR_END_IFs}

    {IF ano_found_news_orcs equals yes}
    {MSGW_Ruvio _"We already know what we were sent to find out. We should return to Freetown now."}
    {IF ano_reme_saved equals no}
    {MSGW_Gawen _"But we never found out what happened to Reme."}
    {IF ano_bontom_location equals yes}
    {IF ano_bontom_visited equals yes}
    {MSGW_Ruvio _"We had our chance to rescue him in Bontom, but we failed to do so..."}
    {ELSE}
    {MSGW_Ruvio _"Well, I guess we could still check that Bontom place the peasants told us about."}
    {END_IF}
    {ELSE_IF ano_reme_prisoned equals yes}
    {MSGW_Ruvio _"Well, I guess we could still try to find out where this Bontom place is where your friend Reme is being kept."}
    {ELSE}
    {MSGW_Ruvio _"I don't think there's anything we can do about that at this point..."}
    {TWO_END_IFs}
    {END_IF_WITHOUT_ELSE}
    {ELSE}

    {IF ano_barnon_visited equals yes}
    {MSGW_Ruvio _"We've already searched for answers in the city of Barnon."}
    {ELSE}
    {MSGW_Ruvio _"My lord, from here we may explore a few possibilities. To the south, there is city of Barnon. It would definitely be very dangerous to go there, but..."}
    {MSGW_Gawen _"...but we could probably find something about orcs there, right?"}
    {END_IF}
    {IF ano_lorin_joined equals yes}
    {MSGW_Ruvio _"We already went west to Haeltin. That was where your step-mother was, remember? That she was the 'She-wolf' really surprised me."}
    {ELSE}
    {MSGW_Ruvio _"We've heard that some woman, known by the nickname 'The She-wolf of Haeltin', was besieged by the orcs and she was able to repel them. Haeltin is west from here. It would be easy to go to her and ask her a few questions."}
    {END_IF}
    {IF ano_saorduc_visited equals yes}
    # (see next conditional after this block)
    {ELSE}
    {MSGW_Gawen _"We could also go for the swamps."}
    {MSGW_Ruvio _"We could, but saurians live in the swamps of Saorduc, and they rarely go outside of their mud. I doubt they would know anything useful. There are also some villages here, you could go and ask peasants, maybe they would know something."}
    {END_IF}

    {IF ano_saorduc_visited equals yes}
    {IF ano_barnon_visited equals yes}
    {MSGW_Ruvio _"Frankly, I have no idea what to do now. We have already searched all of the obvious locations."}
    # (no need for elses here, because we already handled all of those cases in the previous block of conditionals)
    {END_IF_WITHOUT_ELSE}
    {END_IF_WITHOUT_ELSE}
    {END_IF}
#enddef

    {STARTING_VILLAGES 1 40}
    {AFTERNOON}

    [side]
        controller=human
        id=Gawen Hagarthen
        name=_"Gawen Hagarthen"
        type=Young Hagarthen
        profile=portraits/gawen_winter.png
        team_name=good
        canrecruit=yes
        unrenamable=yes
        side=1
        income=-5
    [/side]

    {PLACE_IMAGE (scenery/signpost.png) 15 1}
    {PLACE_IMAGE (scenery/signpost.png) 7 20}
    {PLACE_IMAGE (scenery/signpost.png) 1 13}
    {PLACE_IMAGE (scenery/signpost.png) 20 14}
    {PLACE_IMAGE (terrain/village/camp.png) 10 7}
    {PLACE_IMAGE (terrain/burned-village-snow.png) 18 6}
    {LABEL 10 2 (_"Raedwood Forest")}
    {LABEL 15 1 (_"To Freetown")}
    {LABEL 1 13 (_"To Haeltin")}
    {LABEL 19 14 (_"To Saorduc swamps")}
    {LABEL 7 20 (_"To Barnon")}
    {LABEL 4 5 (_"Hyeton")}

    {TALK_TO_UNIT}

    [event]
        name=prestart
        {RECALLXY (Karen) 1 22}
        {RECALLXY (Ruvio) 2 22}

        {IF_HAVE_UNIT_ANY (Reme Carrenemoe)}
        {RECALLXY (Reme Carrenemoe) 4 22}
        {END_IF_WITHOUT_ELSE}
        {RECALLXY (Lady Lorin) 3 22}
        {RECALLXY (Majid Yahyazad) 5 22}
        {IF ano_bontom_location equals yes}
        {PLACE_IMAGE (terrain/village/camp.png) $bontom_x $bontom_y}
        {VARIABLE ano_tmp_y 0}
        {VARIABLE_OP ano_tmp_y add $bontom_y}
        {VARIABLE_OP ano_tmp_y add 1}
        {LABEL $bontom_x $bontom_y (_"Bontom")}
        {CLEAR_VARIABLE ano_tmp_y}
        {END_IF_WITHOUT_ELSE}
        #FREETOWN
        {IF ano_strateg_pos equals 1}
        {TELEPORT (Gawen Hagarthen) 15 1}
        #HAELTIN
        {ELSE_IF ano_strateg_pos equals 2}
        {TELEPORT (Gawen Hagarthen) 1 13}
        #BARNON
        {ELSE_IF ano_strateg_pos equals 3}
        {TELEPORT (Gawen Hagarthen) 7 20}
        #SAORDUC
        {ELSE_IF ano_strateg_pos equals 4}
        {TELEPORT (Gawen Hagarthen) 19 14}
        #BURNED_VILLAGE
        {ELSE_IF ano_strateg_pos equals 5}
        {TELEPORT (Gawen Hagarthen) 18 6}
        #REME
        {ELSE}
        {TELEPORT (Gawen Hagarthen) $bontom_x $bontom_y}
        {FOUR_END_IFs}
        {END_IF}

        {IF ano_lorin_knows_about_roe equals yes}
        {IF_HAVE_UNIT_ANY (Rob Roe)}
        [kill]
            id=Rob Roe
        [/kill]
        {DISALLOW_RECRUIT 1 ("Thug,Footpad,Thief") }
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}

        #repeated with "frozen orc", so setting variable is not within "story" markers
        {IF ano_lorin_joined equals yes}
        {IF ano_saorduc_visited equals yes}
        {IF ano_barnon_visited equals yes}
        {IF ano_orcs_visited equals yes}
        {IF ano_found_news_orcs equals no}
        {IF ano_bontom_visited equals yes}
        {VARIABLE ano_found_news_orcs yes}
        {MSGW_Ruvio _"We already know what we were sent to find out. We should return to Freetown now."}
        {ELSE}
        {IF ano_reme_prisoned equals no}
        {VARIABLE ano_found_news_orcs yes}
        {MSGW_Ruvio _"We already know what we were sent to find out. We should return to Freetown now."}
        {END_IF_WITHOUT_ELSE}
        {END_IF}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        #end of finding frozen orc
        [terrain]
            x=10
            y=7
            terrain=Aa
        [/terrain]
    [/event]

    [event]
        name=start
        {IF ano_strateg_pos equals 1}
        {RUVIOEXPLAINSTRATEG}
        {ELSE}
        {IF ano_strateg_pos equals 2}
        {MSGW_Ruvio _"It is extremely important to everyone to remember not to refer to Gawen by his real name. Always call him Gaumhaldric."}
        {MSGW_Lorin _"Why?"}
        {MSGW_Ruvio _"First of all, because our people at Freetown aren't ready to have an Akladian leader. Second, because Bor Cryne would send his entire army to pursue us if he heard so much as a whisper of the name Gawen Hagarthen."}
        {MSGW_Lorin _"Gaumhaldric... so, is this why my son is not shaving? He wants to hide his real identity under a beard?"}
        {MSGW_Karen _"No, no, no. He HAS to have a beard. All of our great Wesnothian kings had beards!"}
        {END_IF_WITHOUT_ELSE}
        {END_IF}

#ifdef DEBUG_MODE
        {IF_DEBUG_MODE_IS_ACTUALLY_ON}
        {IF_HAVE_UNIT_ANY (Kyobaine)}
        {RECALLXY (Kyobaine) 1 1}
        {MSG_EMK _"Hello."}
        [message]
            # wmllint: recognize Kyobaine
            speaker=Kyobaine
            message=_"Do you like my clothes?"
        [/message]
        [if]
            [found_item]
                # wmllint: recognize Kyobaine_winter_cloak
                id=Kyobaine_winter_cloak
            [/found_item]
            [then]
                {MSGW_Gawen _"Yes."}
            [/then]
            [else]
                #po: debug message only for developers; ok to skip translating:
                {MSGW_Gawen _"Darn it, it looks like the [found_item] tag doesn't work across scenarios..."}
            [/else]
        [/if]
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
#endif

        [objectives]
            side=1
            # Warning: if these notes get much longer, they start to get cut off:
            {OBJECTIVE_NOTES _"This is a large-scale map, where you may choose a way to go. Move Gawen to a signpost or any other location to move to a new scenario. Move Gawen to the tent to talk with his friends."}
            {HAS_NO_TURN_LIMIT}
        [/objectives]
    [/event]

    #RETURN TO FREETOWN
    [event]
        {MOVETO 15 1 (Gawen Hagarthen)}
        first_time_only=no

        {IF ano_lorin_joined equals yes}
        {IF ano_saorduc_visited equals yes}
        {IF ano_barnon_visited equals yes}
        {IF ano_bontom_visited equals yes}
        {IF ano_orcs_visited equals yes}
        {IF ano_found_news_orcs equals no}
        {VARIABLE ano_found_news_orcs yes}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}
        {END_IF_WITHOUT_ELSE}

        {IF ano_lorin_joined equals yes}
        {IF ano_found_news_orcs equals yes}
        {CLEAR_VARIABLE ano_barnon_used}
        {CLEAR_VARIABLE ano_bontom_used}
        {NEXT_SCENARIO_CONTINUE (15_Back_in_Freetown)}
        {ELSE}
        {MSGW_Ruvio _"My lord, we cannot go back to Freetown. We have nothing to report, and we have not found anything about the orcs."}
        {END_IF}
        {ELSE}
        {MSGW_Ruvio _"My lord, I do not think we should go back to Freetown already. We haven't met with the She-wolf of Haeltin west of here. She may have some great insight, having fought with orcs already."}
        {END_IF}
    [/event]

    #GOING TO HAELTIN
    [event]
        {MOVETO 1 13 (Gawen Hagarthen)}
        first_time_only=no
        [if]
            [variable]
                name=ano_lorin_joined
                equals=yes
            [/variable]
            [then]
                {MSGW_Ruvio _"We were in Haeltin already. Where would you like to go now?"}
            [/then]
            [else]
                {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
                (_"Are you sure you want to go there?")
                (_"Yes, definitely.") (yes)
                (_"Well, maybe not.") (no)}
                {IF ano_opt equals yes}
                {NEXT_SCENARIO_CONTINUE (14c_She_Wolf_of_Haeltin)}
                {ELSE}
                {MSGW_Ruvio _"As you wish, my lord."}
                {END_IF}
            [/else]
        [/if]
    [/event]

    #GOING TO SAURIANS
    [event]
        {MOVETO 20 14 (Gawen Hagarthen) }
        first_time_only=no

        [if]
            {CONDITION ano_saorduc_visited equals yes}
            [then]
                {MSGW_Ruvio _"We already were in Saorduc. Where to now?"}
            [/then]
            [else]
                {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
                (_"Are you sure you want to go there? I've told you that I doubt Saurians know anything useful.")
                (_"Yes, definitely.") (yes)
                (_"Well, maybe not.") (no)}
                {IF ano_opt equals yes}
                {IF_HAVE_UNIT (Reme Carrenemoe)}
                {MSG_Reme _"So, on to Saorduc! Hopefully it is a wise decision and lizard men know something about orcs."}
                {ELSE}
                {MSG_Ruvio _"So, on to Saorduc! Hopefully it is a wise decision and lizard men know something about orcs."}
                {END_IF}
                {IF ano_saurians equals yes}
                {IF ano_lorin_joined equals yes}
                {MSGW_Lorin _"Lizards? We already fought with them. I hate lizards."}
                {END_IF_WITHOUT_ELSE}
                {END_IF_WITHOUT_ELSE}
                {NEXT_SCENARIO_CONTINUE (14e_Saorduc_Swamps)}
                {ELSE}
                {MSGW_Ruvio _"That was wise decision, my lord."}
                {END_IF}
            [/else]
        [/if]
    [/event]

    #GOING TO BARNON
    [event]
        {MOVETO 7 20 (Gawen Hagarthen)}
        first_time_only=no
        [if]
            [variable]
                name=ano_barnon_visited
                equals=yes
            [/variable]
            [then]
                {MSGW_Ruvio _"We already scouted near Barnon. Where should we go now?"}
            [/then]
            [else]
                {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
                (_"Are you sure you want to go there? A lot of enemy soldiers could be near Barnon.")
                (_"Yes, definitely.") (yes)
                (_"Well, maybe not.") (no)}
                {IF ano_opt equals yes}
                {MSGW_Ruvio _"This could be dangerous... but also extremely valuable. We can definitely find out something about orcs there."}
                {NEXT_SCENARIO_CONTINUE (14a_Scouting_Near_Barnon)}
                {ELSE}
                {MSGW_Ruvio _"Yes, on other hand, maybe we should search elsewhere."}
                {END_IF}
            [/else]
        [/if]
    [/event]

    #HILL VILLAGE
    [event]
        {MOVETO 3 6 (Gawen Hagarthen)}
        first_time_only=no
        {MESSAGE (narrator) (portraits/peasant1.png) () _"Who is comin' here? What d'ya wanna from us?"}
        {MSGW_Gawen _"Don't be afraid, I want ask you few question and then I will go."}
        {MESSAGE (narrator) (portraits/peasant1.png) () _"So go on an' ask us, then."}

        {IF ano_reme_prisoned equals yes}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI5 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know where the place called Bontom is?") (bontom)
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {HILL_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        #Had not find out about Reme in Bontom
        {ELSE}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {HILL_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        {END_IF}
    [/event]

    #CROSSROAD VILLAGE
    [event]
        {MOVETO 11 9 (Gawen Hagarthen)}
        first_time_only=no
        {MESSAGE (narrator) (portraits/peasant1.png) () _"Ah, welcome, we've heard about your victories, Gaumhaldric."}
        {IF ano_lorin_joined equals yes}
        {MSGW_Lorin _"I still can't get used to them calling him Gaumhaldric."}
        {MSGW_Karen _"Cute name, isn't it?"}
        {END_IF_WITHOUT_ELSE}
        {MSGW_Gawen _"Don't be afraid, I want ask you few question and then I will go."}
        {MESSAGE (narrator) (portraits/peasant1.png) () _"Anything for you, young knight."}
        {IF ano_reme_prisoned equals yes}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI5 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know where the place called Bontom is?") (bontom)
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {CROSS_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        #Had not found out about Reme in Bontom
        {ELSE}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {CROSS_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        {END_IF}
    [/event]

    #BARNON VILLAGE
    [event]
        {MOVETO 6 19 (Gawen Hagarthen)}
        first_time_only=no
        #ASK FOR BONTOM
        {MESSAGE (narrator) (portraits/peasant1.png) () _"Free men from Raedwood forest! You are always welcome here."}
        {IF ano_reme_prisoned equals yes}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI5 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know where the place called Bontom is?") (bontom)
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {BARNON_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        #Had not find out about Reme in Bontom
        {ELSE}
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png) (_"Please, tell me...")
        (_"Do you know anything about Reme Carrenemoe?") (reme)
        (_"Have you heard anything about orcs?") (orcs)
        (_"Would you want to fight for me?") (fight)
        (_"Go and work, good man.") (stop)
        }
        {BARNON_PEASANT_ANSWERS (portraits/peasant1.png)}
        {END_WHILE}
        {END_IF}
    [/event]

    #THE TENT DISCUSSION WITH FRIENDS
    [event]
        {MOVETO 10 7 (Gawen Hagarthen)}
        first_time_only=no
        {VARIABLE ano_continue yes}
        {WHILE ano_continue equals yes}
        {IF ano_lorin_joined equals yes}
        {IF ano_reme_saved equals yes}
        {MSGOPTI6 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"I would love to talk to...")
        (_"Ruvio") (ruvio)
        (_"Karen") (karen)
        (_"Reme") (reme)
        (_"Lorin") (lorin)
        (_"Yahyazad") (Yahyazad)
        (_"I changed my mind") (noone)
        }
        {ELSE}
        {MSGOPTI5 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"I would love to talk to...")
        (_"Ruvio") (ruvio)
        (_"Karen") (karen)
        (_"Lorin") (lorin)
        (_"Yahyazad") (Yahyazad)
        (_"I changed my mind") (noone)
        }
        {END_IF}
        {ELSE}
        {IF ano_reme_saved equals yes}
        {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"I would love to talk to...")
        (_"Ruvio") (ruvio)
        (_"Karen") (karen)
        (_"Reme") (reme)
        (_"I changed my mind") (noone)
        }
        {ELSE}
        {MSGOPTI3 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"I would love to talk to...")
        (_"Ruvio") (ruvio)
        (_"Karen") (karen)
        (_"I changed my mind") (noone)
        }
        {END_IF}
        {END_IF}

        #TALKING_TO
        {IF ano_opt equals ruvio}
        {MSGOPTI3 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"Ruvio, please tell me..")
        (_"Where Reme Carrenemoe could possibly be?") (reme)
        (_"Advise me what could we do now.") (explain)
        (_"Tell me about my mother.") (mother)
        }
        #RUVIO
        {IF ano_opt equals reme}
        {IF ano_reme_saved equals yes}
        {MSGW_Ruvio _"You are joking, right? He is in our camp!"}
        {ELSE_IF ano_bontom_location equals yes}
        {MSGW_Ruvio _"Probably still in that Bontom place the peasants told us about."}
        {ELSE_IF ano_reme_prisoned equals yes}
        {MSGW_Ruvio _"In some place called Bontom. We could ask peasants about it."}
        {ELSE}
        {IF ano_barnon_visited equals yes}
        {MSGW_Ruvio _"I have no idea where your friend may be; I fear we may have already missed our chance to find out about him..."}
        {ELSE}
        {MSGW_Ruvio _"I have no idea where your friend may be; maybe we could ask around some more about him."}
        {FOUR_END_IFs}

        {ELSE_IF ano_opt equals explain}
        {RUVIOEXPLAINSTRATEG}
        {ELSE}
        {MSGW_Ruvio _"About your mother? What do you want to know about her?"}
        {MSGW_Gawen _"Everything."}
        {MSGW_Ruvio _"Well, she was from a royal house. The Akladian king gave her a simple choice: marry him or he would unleash his anger on her family. So, she agreed. I visited her from time to time, singing songs, bringing her news from home... "}
        {MSGW_Ruvio _"I think eventually she even warmed up to your father, the king. When she gave birth to you, she gave everything she had for you. But behind her back Akladian clans were conspiring... and finally someone gave her a poisoned cup. She died, slowly, and painfully. I was able to be near her in her final hours. I promised her that I would take care of you."}
        {MSGW_Gawen _"Who poisoned her?"}
        {MSGW_Ruvio _"I don't know. No one knows."}
        {IF ano_roe_lorin_clan_bought_poison equals yes}
        {MSGW_Gawen _"Rob Roe mentioned Lorin's clan once bought some special poison from Outlaws... "}
        {MSGW_Ruvio _"And you think that..."}
        {MSGW_Gawen _"Why shouldn't I think that?"}
        {MSGW_Ruvio _"You are right, Gawen. Akladians have a long history of poisoning each other. You might say it's their national sport. But still... yes, it had escaped my attention before."}
        {ELSE}
        {MSGW_Gawen _"I wish I had asked around more about poison previously; it's probably too late to find out more now..."}
        {END_IF}
        {TWO_END_IFs}
        #ENDRUVIO
        {ELSE_IF ano_opt equals karen}
        {MSGW_Gawen _"Hey Karen, what's up?"}
        {MSGW_Karen _"I just made up a new song about you, want to hear it?"}
        {MSGW_Gawen _"You are a gifted girl... fighting, singing, what else can you do?"}
        {MSGW_Karen _"I can also dance. Gawen. When we return to Freetown I could dance for you... "}
        {MSGW_Gawen _"I'm sure I would enjoy watching you dance."}
        {MSGW_Karen _"Oh, I bet you would!"}
        {ELSE_IF ano_opt equals reme}
        {MSG_Reme _"Thank you, Gawen, once again. You have saved my life. I will never forget it, and I will never be able to repay my debt. Earlier my life belonged to you because of duty; now it is yours by choice."}
        {ELSE_IF ano_opt equals Yahyazad}
        {MSGW_Yahyazad _"Gaumhaldric, an interesting mother you have. Can I ask you a question?"}
        {MSGW_Gawen _"Sure, go ahead."}
        {MSGW_Yahyazad _"Is she spoken for? I mean, is there someone she loves? I have often noticed her gazing up at the sky, far, far away, as if she were thinking about someone... or something."}
        #po: this is just Gawen's assumption; my own assumption is that she is thinking about what the Oracle told her:
        {MSGW_Gawen _"I think she must be remembering my father. She has no one else I know about."}
        {MSGW_Yahyazad _"That is fortunate for me. She seems to have locked her heart up in an unbreakable fortress... but I think I can find a way into her heart. With time and patience, I'm sure I can discover a way to break down those walls. "}
        {MSGW_Gawen _"Majid Yahyazad, Lorin is my step-mother, but she has never really shown any tenderness, even to me. I have always known her to be a harsh and unforgiving woman."}
        {MSGW_Gawen _"I'm afraid pursuing her will come with a heavy price. I think she thinks love is a weakness... she seems more interested in war and finding new ways to cause pain to others."}
        {MSGW_Yahyazad _"Ah, Gaumhaldric, perhaps you are right, but if it will be as a war to unlock her heart, I am prepared to wage it. I am well-acquainted with the ways of war."}
        {MSGW_Yahyazad _"Besides, in the end, the war for the affection of a worthy woman is the only war where the price to win is a privilege, not a burden, to pay."}
        {MSGW_Gawen _"You find my step-mother... a worthy challenge, then? "}
        {MSGW_Yahyazad _"I do... and shall gladly pay the price to try to win her heart. "}
        {MSGW_Gawen _"You have my blessing, noble Majid, for what it's worth. Sometimes the ruthlessness of the 'She-Wolf of Haeltin' still scares even me. "}

        {ELSE_IF ano_opt equals lorin}
        {IF ano_roe_lorin_clan_bought_poison equals yes}
        {MSGOPTI5 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"Mother, may I have a word with you?")
        (_"Your clan once bought poison from outlaws. Why?") (poison)
        (_"What do you think about Yahyazad?") (Yahyazad)
        (_"What do you know about orcs?") (orcs)
        (_"How did my real mother die?") (mother)
        (_"Never mind") (nothing)
        }
        {ELSE}
        {MSGOPTI4 (Gawen Hagarthen) (portraits/gawen_winter.png)
        (_"Mother, can I have a word with you?")
        (_"What do you think about Yahyazad?") (Yahyazad)
        (_"What do you know about orcs?") (orcs)
        (_"How did my real mother die?") (mother)
        (_"Never mind") (nothing)
        }
        {END_IF}
        #LORIN ANSWERS
        {IF ano_opt equals Yahyazad}
        {MSGW_Lorin _"Why do you ask?"}
        {MSGW_Gawen _"Well, he seems to be interested in you."}
        {MSGW_Lorin _"Yes, I noticed that. I think one would have to be blind NOT to notice that. But I am not interested in him."}
        {MSGW_Gawen _"Why not? He seems to be a good man."}
        {MSGW_Lorin _"He is an underling."}
        {MSGW_Gawen _"Underling? Mother, why do you still use such words? I am 'underling' too, after all."}
        {MSGW_Lorin _"No! I could never call you that. You are not... I mean... I... oh, you are too young to understand!"}
        #po: cross-reference to dialogue in S16, Choosing the Best:
        {MSGW_Lorin _"Besides, you have lost your memory, so you probably do not remember what our customs are regarding widows that betray their dead husbands. I will explain it to you another time."}
        {ELSE_IF ano_opt equals orcs}
        {MSGW_Lorin _"Orcs? They are good fighters. Strong, disciplined, I wish I had such soldiers."}
        {MSGW_Gawen _"Mother, orcs just burn, pillage, and murder! They hate us, and yet you seem to respect them?!?"}
        {MSGW_Lorin _"Well, we are burning, pillaging, murdering and hate our enemies too. What's the difference?"}
        {ELSE_IF ano_opt equals poison}
        {MSGW_Lorin _"Poison? What poison? My clan has never bought any poison!"}
        {MSGW_Gawen _"Rob Roe told me about it."}
        {MSGW_Lorin _"Can you repeat that name? Rob - Roe. Rob Roe... No, I can't say I remember that name. I don't know anything about my clan buying a poison. But then, I am only a woman, and our clan lord didn't tell me everything."}
        {VARIABLE ano_lorin_knows_about_roe yes}
        {ELSE_IF ano_opt equals mother}
        {MSGW_Lorin _"Your mother? Your... why you are asking ME about your mother?"}
        {MSGW_Gawen _"I can't remember anything about her. I would love to hear something about her. Did you know her?"}
        #po: this is a Suspiciously Specific Denial: https://tvtropes.org/pmwiki/pmwiki.php/Main/SuspiciouslySpecificDenial
        {MSGW_Lorin _"No! I did not know her! I... I'm sorry Gawen, but I don't know how your mother died or who poisoned her."}
        {MSGW_Gawen _"I wasn't asking you about that."}
        {ELSE}
        # (???)
        {FOUR_END_IFs}
        #ENDLORIN
        {ELSE}
        {VARIABLE ano_continue no}
        {FOUR_END_IFs}
        {END_IF}
        {END_WHILE}
    [/event]

    #BURNED VILLAGE - THE ORCS
    [event]
        {MOVETO 18 6 (Gawen Hagarthen)}
        first_time_only=no
        {IF ano_orcs_visited equals yes}
        {MSGW_Ruvio _"There are no more orcs near this ruins of the village."}
        {ELSE}
        {IF ano_orcs_peasant_joined equals yes}
        {MSG_Matt_E_E _"My lord! This time for sure you will chase off that orcish band, kill all the orcs, and free my people!"}
        {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
        (_"So, should we take on the orcs?")
        (_"Yes, definitely.") (yes)
        (_"Well, maybe not.") (no)
        }
        {ELSE}
        {VARIABLE ano_orcs_peasant_joined yes}
        [unit]
            type=Peasant
            x=18
            y=6
            # formerly spelled "Matthews Eagle Eye":
            id=Matthew Eagles-Eye
            name=_"Matthew Eagle's-Eye"
            side=1
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
        {MSGW_Ruvio _"Someone is hiding here!"}
        {IF ano_lorin_joined equals yes}
        {MSG_Matt_E_E _"Ah! Humans! And Akladians with them?! Still, what good fortune!"}
        {ELSE}
        {MSG_Matt_E_E _"Ah! Humans! And not Akladians! What good fortune!"}
        {END_IF}
        {MSGW_Gawen _"Who are you, and what are you doing here?"}
        {MSG_Matt_E_E _"The orcs burned down my village, Ruen, and they left not long ago. They took many prisoners. I was hiding here, waiting for a miracle. And now the miracle has come!"}
        {MSGW_Karen _"Oh my. It's so funny I think I'm gonna die laughing. Gaumhaldric the Miracle-maker, how about the sound of that?"}
        {MSGW_Gawen _"Miracle? What do you mean?"}
        {MSG_Matt_E_E _"You of course will chase that orcish band, kill all the orcs and free my people!"}
        {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
        (_"Hm, my lord, do you think we should fullfill this peasant's request?")
        (_"Yes, definitely.") (yes)
        (_"Well, maybe not.") (no)
        }
        {END_IF}

        {IF ano_opt equals yes}
        {MSGW_Ruvio _"Well, I hope it's wise decision."}
        {MSGW_Gawen _"Of course it is. We are searching for orcs, and those are orcs, isn't it?"}
        {NEXT_SCENARIO_CONTINUE (14d_Avenging_Ruen)}
        {ELSE}
        {MSGW_Ruvio _"Yes, on other hand maybe we should search elsewhere."}
        {END_IF}
        {END_IF}
    [/event]

    #BONTOM - SHOULD BE HIDDEN
    [event]
        {MOVETO $bontom_x $bontom_y (Gawen Hagarthen)}
        first_time_only=no

        {IF ano_bontom_visited equals yes}
        {MSGW_Ruvio _"We already fought with outlaws from Bontom, my lord."}
        {ELSE}
        {IF ano_bontom_location equals yes}
        # (???)
        {ELSE}
        # (???)
        {END_IF}
        #
        {MSGOPTI2 (Ruvio) (portraits/ruvio_winter.png)
        (_"So, should we go into Bontom?")
        (_"Yes, definitely.") (yes)
        (_"Well, maybe not.") (no)
        }
        {IF ano_opt equals yes}
        {MSGW_Ruvio _"Yes, we should save Reme now."}
        {NEXT_SCENARIO_CONTINUE (14b_Bontom)}
        {ELSE}
        {MSGW_Ruvio _"Yes, on other hand maybe we should search elsewhere."}
        {END_IF}
        {END_IF}
    [/event]

    [event]
        name=moveto
        first_time_only=no
        {MODIFY_UNIT (id=Gawen Hagarthen) moves 10}
    [/event]
[/scenario]
