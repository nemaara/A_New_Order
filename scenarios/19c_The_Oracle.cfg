#textdomain wesnoth-A_New_Order
[scenario]
    name = _ "The Oracle"
    id=19c_The_Oracle
    map_data="{~add-ons/A_New_Order/maps/Oracle.map}"
    next_scenario=18_Start_of_the_Quest
    {TURNS4 37 35 33 31}
    {INTRO_AND_SCENARIO_MUSIC siege_of_laurelmor.ogg the_city_falls.ogg}
    {EXTRA_SCENARIO_MUSIC northern_mountains.ogg}
    {EXTRA_SCENARIO_MUSIC siege_of_laurelmor.ogg}
    {EXTRA_SCENARIO_MUSIC battle/onethousandsuns.ogg}
    {EXTRA_SCENARIO_MUSIC weight_of_revenge.ogg}
    {EXTRA_SCENARIO_MUSIC northerners.ogg}
    {EXTRA_SCENARIO_MUSIC theme_of_a_new_order.ogg}
    {EXTRA_SCENARIO_MUSIC battle/ambuscade.ogg}
    {EXTRA_SCENARIO_MUSIC battle-epic.ogg}
    [story]
        [part]
            #po: spoken by Gawen (so, none of the characters in-game remember what the city had once been named, but, do any of the campaign authors?)
            story=_"The Oracle was the title of a woman living in ruins of an old city. For generations, there had always been one female mage with prophetic abilities living there, so long that no one remembered now what the city had once been named. Now it was just 'the city of the Oracle.'"
        [/part]
        [part]
            # TODO: tune enemy AI so that their behavior better matches the disunity described here:
            story=_"When we arrived, we found the city of the Oracle besieged. Four different armies, each under a different leader, surrounded it. This disunity seemed to contribute heavily to fact the Oracle still could defend herself. Each army seemed to siege the city on its own. But the city was ready to fall; our army had arrived in at the last possible moment for relief."
        [/part]
    [/story]
    {DAWN}
    {MORNING}
    {AFTERNOON}
    {DUSK}
    {FIRST_WATCH}
    {SECOND_WATCH}
    victory_when_enemies_defeated=yes
    {STARTING_VILLAGES 2 8}
    {STARTING_VILLAGES 3 8}
    {STARTING_VILLAGES 4 8}
    {STARTING_VILLAGES 5 8}
    {STARTING_VILLAGES 6 8}
    # (image placing moved to prestart event)
    [side]
        controller=human
        id=Gawen Hagarthen
        name=_"Gawen Hagarthen"
        type=Hagarthen
        profile=portraits/gawen_was.png
        team_name=good
        canrecruit=yes
        unrenamable=yes
        facing=ne
        side=1
#ifdef NIGHTMARE
        recruit=Peasant
#else
        # This "recruit" line was commented out originally; might want to change the conditionalization, or just remove it again:
        recruit=Peasant,Fencer
#endif
        {GOLD4 170 160 150 140}
        {INCOME4 3 2 1 0}
    [/side]

    ################################
    # SIDE 2 (AI ALLIED LOYALISTS) #
    ################################
    [side]
        controller=ai
        # In charge of defense of the Oracle:
        id=Matthias Ramon
        name=_"Matthias Ramon"
        type=General
        team_name=good
        canrecruit=yes
        side=2
        # Spearman = fighter, Bowman = archer, Peasant = fighter, Swordsman = fighter, Mage = mixed fighter, City Militia = fighter
        recruit=Spearman,Bowman,Peasant,Swordsman,Mage,City Militia
        extra_recruit={ON_DIFFICULTY4 (White Mage) (Javelineer) (Sergeant) (Giant Rat)}
        {INCOME4 6 5 4 3}
        {GOLD4 140 130 120 110}
        [modifications]
            {TRAIT_LOYAL OVERLAY=""}
            {TRAIT_RESILIENT}
            {TRAIT_FEARLESS}
            [object]
                id=M_R_healing_skill
                duration=scenario
                silent=yes
                name= _ "Healing skill"
                image=items/ring-red.png
                description= _ "This unit has learned an odd style of healing: it can cure poison and heal a few hitpoints of wounded friendly units."
                [effect]
                    apply_to=new_ability
                    [abilities]
                        [heals]
                            id=M_R_basic_healing
                            affect_allies=yes
                            name= _"oracular healing"
                            #po: String splicing here; amount of healing varies with difficulty and will be interpolated.
                            #po: Spliced string will read something like "heals +5, cures poison"
                            description= _"heals +" + {ON_DIFFICULTY4 7 5 3 1} + _", cures poison"
                            value={ON_DIFFICULTY4 7 5 3 1}
                            poison=cured
                            [affect_adjacent]
                                adjacent=n,ne,se,s,sw,nw
                            [/affect_adjacent]
                        [/heals]
                    [/abilities]
                [/effect]
            [/object]
        [/modifications]
        [ai]
            {NO_SCOUTS}
            passive_leader=yes # FIXME: the game has ignored this on me at least once; attempting some solutions in the prestart event...
#ifdef EASY
            recruitment_pattern=fighter,archer,fighter,mixed fighter,fighter,healer,fighter,2
            recruitment_more="2"
#else
            recruitment_pattern=fighter,archer,fighter,mixed fighter,fighter,1,0
#ifdef NIGHTMARE
            recruitment_more="0"
#else
            recruitment_more="1"
#endif
#endif
            caution=0.4
            aggression=0.45
            grouping=defensive
            support_villages=yes
            [avoid]
                terrain=Ww
            [/avoid]
            [goal]
                name=protect_unit
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                protect_radius=5
                value={ON_DIFFICULTY4 16 14 12 10}
            [/goal]
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=5
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
        [/ai]
        [ai]
            time_of_day=dusk,first_watch,second_watch
            aggression=0.2
            caution=0.8
            grouping=no
            [avoid]
                terrain=Ww
            [/avoid]
            [goal]
                name=protect_unit
                [criteria]
                    side=2
                    canrecruit=yes
                [/criteria]
                protect_radius=4
                value={ON_DIFFICULTY4 17 16 15 14}
            [/goal]
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=4
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
        [/ai]
        [unit]
            type=Pikeman
            id="Oracle's Guard 1"
            name=_"Oracle's Guard"
            x=14
            y=21
            ai_special=guardian
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Pikeman
            id="Oracle's Guard 2"
            name=_"Oracle's Guard"
            x=15
            y=19
            hitpoints={ON_DIFFICULTY4 52 50 48 46}
            experience={ON_DIFFICULTY4 36 34 32 30}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Swordsman
            id="Oracle's Guard 3"
            name=_"Oracle's Guard"
            x=22
            y=19
            hitpoints={ON_DIFFICULTY4 52 50 48 46}
            experience={ON_DIFFICULTY4 28 26 24 22}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Mage
            gender=female
            id="Oracle's Guard 5"
            name=_"Oracle's Guard"
            x=21
            y=20
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Swordsman
            id="Oracle's Guard 6"
            name=_"Oracle's Guard"
            x=23
            y=22
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Swordsman
            id="Oracle's Guard 7"
            name=_"Oracle's Guard"
            x=22
            y=24
            hitpoints={ON_DIFFICULTY4 48 42 36 30}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Swordsman
            id="Oracle's Guard 8"
            name=_"Oracle's Guard"
            x=22
            y=23
            hitpoints={ON_DIFFICULTY4 35 30 25 20}
            experience={ON_DIFFICULTY4 24 16 8 0}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Spearman
            id="Oracle's Guard 9"
            name=_"Oracle's Guard"
            x=19
            y=25
            hitpoints={ON_DIFFICULTY4 32 31 30 29}
            experience={ON_DIFFICULTY4 8 6 4 2}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 10"
            name=_"Oracle's Guard"
            x=17
            y=19
            hitpoints=19 # max is normally 18, but this unit is resilient
            experience={ON_DIFFICULTY4 6 5 4 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 11"
            name=_"Oracle's Guard"
            x=16
            y=19
            hitpoints=19 # max is normally 18, but this unit is resilient
            experience={ON_DIFFICULTY4 6 5 4 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 12"
            name=_"Oracle's Guard"
            x=18
            y=19
            hitpoints=22 # max is normally 18, but this unit is resilient
            experience={ON_DIFFICULTY4 5 4 3 2}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 13"
            name=_"Oracle's Guard"
            x=23
            y=23
            hitpoints={ON_DIFFICULTY4 14 12 10 8}
            experience={ON_DIFFICULTY4 4 3 2 1}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 14"
            name=_"Oracle's Guard"
            x=19
            y=19
            hitpoints={ON_DIFFICULTY4 17 16 15 14}
            experience={ON_DIFFICULTY4 4 3 2 1}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 15"
            name=_"Oracle's Guard"
            x=20
            y=25
            experience={ON_DIFFICULTY4 3 2 1 0}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 16"
            name=_"Oracle's Guard"
            x=17
            y=24
            experience={ON_DIFFICULTY4 5 4 3 2}
            hitpoints={ON_DIFFICULTY4 15 11 7 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 17"
            name=_"Oracle's Guard"
            x=23
            y=21
            experience={ON_DIFFICULTY4 5 4 3 2}
            hitpoints={ON_DIFFICULTY4 15 11 7 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Bowman
            id="Oracle's Guard 18"
            name=_"Oracle's Guard"
            x=20
            y=20
            experience={ON_DIFFICULTY4 8 7 6 5}
            hitpoints={ON_DIFFICULTY4 24 17 10 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 19"
            name=_"Oracle's Guard"
            x=15
            y=23
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Bowman
            id="Oracle's Guard 20"
            name=_"Oracle's Guard"
            x=17
            y=21
            hitpoints={ON_DIFFICULTY4 18 14 10 6}
            experience={ON_DIFFICULTY4 12 10 8 6}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
        [unit]
            type=Sergeant
            id="Oracle's Guard 21"
            name=_"Oracle's Guard"
            x=16
            y=22
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Bowman
            id="Oracle's Guard 22"
            name=_"Oracle's Guard"
            x=22
            y=21
            experience={ON_DIFFICULTY4 15 12 9 6}
            hitpoints={ON_DIFFICULTY4 25 20 15 10}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 23"
            name=_"Oracle's Guard"
            x=17
            y=23
            experience={ON_DIFFICULTY4 22 21 20 19}
            hitpoints={ON_DIFFICULTY4 6 5 4 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 24"
            name=_"Oracle's Guard"
            x=20
            y=24
            experience={ON_DIFFICULTY4 4 3 2 1}
            hitpoints={ON_DIFFICULTY4 16 14 12 10}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 25"
            name=_"Oracle's Guard"
            x=15
            y=20
            experience={ON_DIFFICULTY4 9 8 7 6}
            hitpoints={ON_DIFFICULTY4 16 14 12 10}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]
        [unit]
            type=Bowman
            id="Oracle's Guard 26"
            name=_"Oracle's Guard"
            x=15
            y=22
            experience={ON_DIFFICULTY4 32 30 28 26}
            hitpoints={ON_DIFFICULTY4 19 18 17 16}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]
        [unit]
            type=Duelist
            id="Oracle's Guard 27"
            name=_"Oracle's Guard"
            x=15
            y=21
            experience={ON_DIFFICULTY4 28 21 14 7}
            hitpoints={ON_DIFFICULTY4 25 20 15 10}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Duelist
            id="Oracle's Guard 28"
            name=_"Oracle's Guard"
            x=21
            y=24
            experience={ON_DIFFICULTY4 36 25 14 3}
            hitpoints={ON_DIFFICULTY4 26 23 20 17}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
#ifdef EASY
            type=Master at Arms
#else
            type=Duelist
#endif
            id="Oracle's Guard 29"
            name=_"Oracle's Guard"
            x=16
            y=23
            experience={ON_DIFFICULTY4 30 21 12 3}
            hitpoints={ON_DIFFICULTY4 35 28 21 14}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_FEARLESS}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 30"
            name=_"Oracle's Guard"
            x=21
            y=21
            experience={ON_DIFFICULTY4 6 5 4 3}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
                {TRAIT_FEARLESS}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 31"
            name=_"Oracle's Guard"
            x=19
            y=22
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
                {TRAIT_FEARLESS}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 32"
            name=_"Oracle's Guard"
            x=20
            y=23
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]
        [unit]
            type=Peasant
            id="Oracle's Guard 33"
            name=_"Oracle's Guard"
            x=18
            y=23
            hitpoints={ON_DIFFICULTY4 17 16 15 14}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]
    [/side]

    #################
    # SIDE 3 (ORCS) #
    #################
    [side]
        controller=ai
        id=Baruk Urk
        name=_"Baruk Urk"
        # Marximilian once reported that Baruk Urk was a Troll Whelp instead, but that may just have been interference from a mod they
        # had installed, so it's probably fine to just trust that this unit type will work properly and get used in normal play:
        type=Orcish Warlord
        team_name=orcish
        canrecruit=yes
        facing=ne
        side=3
        # Warrior = fighter, Wolf Rider = scout, Archer = archer, Assassin = mixed fighter, Slayer = mixed fighter, Troll = fighter, Shaman = mixed fighter
        recruit=Orcish Warrior,Wolf Rider,Orcish Archer,Orcish Assassin,Orcish Slayer,Troll,Orcish Shaman
        {GOLD4 170 180 190 200}
        {INCOME4 2 3 4 5}
        [ai]
            {NO_SCOUTS}
            recruitment_pattern=fighter,scout,fighter,archer,fighter,mixed fighter,fighter,1
            caution=0.5
            aggression=0.2
            leader_aggression="-5.5"
            grouping=offensive
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=6
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 14 12 10 8}
            [/goal]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 7 8 9 10}
            [/goal] #
#endif
        [/ai]
        [ai]
            {NO_SCOUTS}
            time_of_day=dusk,first_watch,second_watch
            aggression=1.0
            caution=0.0
            grouping=no
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=6
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 9 10 11 12}
            [/goal] #
#endif
        [/ai]
        [ai]
            turns=1-2
            passive_leader=yes
            [avoid]
                x=8-10
                y=31-33
            [/avoid]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 14 16 18 20}
            [/goal] #
#endif
        [/ai]
        [unit]
            type=Orcish Warrior
            id="Orc 1"
            name=_"Orc"
            x=16
            y=24
            experience={ON_DIFFICULTY4 9 10 11 12}
            hitpoints={ON_DIFFICULTY4 9 10 11 12}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Warrior
            id="Orc 2"
            name=_"Orc"
            x=14
            y=24
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Troll
            id="Orc 3"
            name=_"Orc"
            x=16
            y=27
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Archer
            id="Orc 4"
            name=_"Orc"
            x=13
            y=26
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Troll
            id="Orc 5"
            name=_"Orc"
            x=17
            y=25
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            experience={ON_DIFFICULTY4 6 7 8 9}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Warrior
            id="Orc 6"
            name=_"Orc"
            x=18
            y=24
            experience={ON_DIFFICULTY4 14 16 18 20}
            hitpoints={ON_DIFFICULTY4 4 8 12 16}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Grunt
            id="Orc 7"
            name=_"Orc"
            x=15
            y=24
            experience={ON_DIFFICULTY4 8 9 10 11}
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Grunt
            id="Orc 8"
            name=_"Orc"
            x=14
            y=23
            experience={ON_DIFFICULTY4 1 2 3 4}
            hitpoints={ON_DIFFICULTY4 7 8 9 10}
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Grunt
            id="Orc 9"
            name=_"Orc"
            x=15
            y=27
            experience={ON_DIFFICULTY4 1 2 3 4}
            hitpoints={ON_DIFFICULTY4 12 18 24 30} # out of 38
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Orcish Grunt
            id="Orc 10"
            name=_"Orc"
            x=8
            y=23
            experience={ON_DIFFICULTY4 3 4 5 6}
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
    [/side]

    ####################
    # SIDE 4 (BANDITS) #
    ####################
    [side]
        controller=ai
        id=Fat Bart
        name=_"Fat Bart"
        type=Fugitive
        team_name=orcish
        canrecruit=yes
        facing=nw
        side=4
        # Outlaw = mixed fighter, Bandit = fighter, Footpad = scout, Trapper = archer
        recruit=Outlaw,Bandit,Footpad,Trapper
        {GOLD4 160 170 180 190}
        {INCOME4 2 3 4 5}
        [modifications]
            # since he is fat:
            {TRAIT_SLOW}
        [/modifications]
        [ai]
            {NO_SCOUTS}
            recruitment_pattern=fighter,mixed fighter,fighter,scout,fighter,archer,fighter,1
            caution=0.5
            aggression=0.2
            grouping=offensive
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=7
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 7 6 5 4}
            [/goal]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 9 10 11 12}
            [/goal] #
#endif
        [/ai]
        [ai]
            {NO_SCOUTS}
            time_of_day=dusk,first_watch,second_watch
            aggression=1.0
            caution=0.0
            grouping=no
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=6
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [leader_goal]
                x=19
                y=23
            [/leader_goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 14 12 10 8}
            [/goal]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 7 8 9 10}
            [/goal] #
#endif
        [/ai]
        [ai]
            turns=1-2
            passive_leader=yes
            [avoid]
                x,y=23,31
            [/avoid]
            # this is just here to test the events involving him:
#ifdef DEBUG_MODE
            [goal]
                [criteria]
                    id=Matthias Ramon
                [/criteria]
                value={ON_DIFFICULTY4 14 16 18 20}
            [/goal] #
#endif
        [/ai]
        [unit]
            type=Outlaw
            id="Outlaw 1"
            name=_"Outlaw"
            x=23
            y=24
            experience={ON_DIFFICULTY4 8 10 12 14}
            hitpoints={ON_DIFFICULTY4 14 16 18 20}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Bandit
            id="Outlaw 2"
            name=_"Outlaw"
            x=22
            y=25
            experience={ON_DIFFICULTY4 12 14 16 18}
            hitpoints={ON_DIFFICULTY4 9 10 11 12}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Trapper
            id="Outlaw 4"
            name=_"Outlaw"
            x=18
            y=25
            experience={ON_DIFFICULTY4 8 9 10 11}
            hitpoints={ON_DIFFICULTY4 17 18 19 20}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Trapper
            id="Outlaw 5"
            name=_"Outlaw"
            x=24
            y=25
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Footpad
            id=Outlaw
            name=_"Outlaw"
            x=21
            y=27
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Outlaw
            id="Outlaw 6"
            name=_"Outlaw"
            x=23
            y=29
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Bandit
            id="Outlaw 7"
            name=_"Outlaw"
            x=21
            y=25
            experience={ON_DIFFICULTY4 9 10 11 12}
            hitpoints={ON_DIFFICULTY4 9 12 15 18}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
        [unit]
            type=Fugitive
            id="Outlaw 8"
            name=_"Outlaw"
            x=24
            y=26
            experience={ON_DIFFICULTY4 20 21 22 23}
            hitpoints={ON_DIFFICULTY4 3 7 11 15}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Fugitive
            id="Outlaw 9"
            name=_"Outlaw"
            x=21
            y=26
            experience={ON_DIFFICULTY4 32 33 34 35}
            hitpoints={ON_DIFFICULTY4 3 7 11 15}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Trapper
            id="Outlaw 10"
            name=_"Outlaw"
            x=22
            y=31
            experience={ON_DIFFICULTY4 8 9 10 11}
            hitpoints={ON_DIFFICULTY4 3 4 5 6}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
    [/side]

    #########################
    # SIDE 5 (NW AKLADIANS) #
    #########################
    [side]
        controller=ai
        id=Burke Barien
        name=_"Burke Barien"
        type=Akladian Lord
        team_name=orcish
        canrecruit=yes
        facing=se
        side=5
        # levels of these units: 3, 1, 2, 3, 2, 1
        recruit=Akladian Pikeneer,Akladian Warrior,Akladian Light Infantry,Akladian Darknite,Akladian Sturmknight,Akladian Raider
        {GOLD4 180 200 220 240}
        {INCOME4 3 4 5 6}
        [ai]
            {NO_SCOUTS}
            recruitment_pattern=fighter,1,2,1,fighter,1
            caution=0.3
            aggression=0.6
            grouping=offensive
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=7
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 7 6 5 4}
            [/goal]
        [/ai]
        [ai]
            {NO_SCOUTS}
            time_of_day=dusk,first_watch,second_watch
            aggression=1.0
            caution=0.0
            grouping=no
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=6
                value={ON_DIFFICULTY4 9 10 11 12}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
        [/ai]
        [unit]
            type=Akladian Warrior
            id=Barien
            name=_"Barien"
            x=20
            y=18
            hitpoints={ON_DIFFICULTY4 12 14 16 18}
            experience={ON_DIFFICULTY4 1 2 3 4}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Warrior
            id=Burien
            name=_"Burien"
            x=21
            y=17
            hitpoints={ON_DIFFICULTY4 5 6 7 8}
            experience={ON_DIFFICULTY4 4 5 6 7}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Warrior
            id=Telen
            name=_"Telen"
            x=20
            y=15
            hitpoints={ON_DIFFICULTY4 9 10 11 12}
            experience={ON_DIFFICULTY4 2 3 4 5}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Raider
            id=Dulen
            name=_"Dulen"
            x=22
            y=18
            hitpoints={ON_DIFFICULTY4 14 16 18 20}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Raider
            id=Burien
            name=_"Burien"
            x=18
            y=18
            hitpoints={ON_DIFFICULTY4 10 15 20 25}
            experience={ON_DIFFICULTY4 3 4 5 6}
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Clansman
            id=Beren
            name=_"Beren"
            x=18
            y=17
            hitpoints={ON_DIFFICULTY4 14 16 18 20}
            experience={ON_DIFFICULTY4 3 4 5 6}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Clansman
            id=Beren 2
            name=_"Beren"
            x=24
            y=17
            hitpoints={ON_DIFFICULTY4 9 10 11 12}
            experience={ON_DIFFICULTY4 1 2 3 4}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Clansman
            id=Beren 3
            name=_"Beren"
            x=22
            y=14
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            experience={ON_DIFFICULTY4 2 3 4 5}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Warrior
            id=Beren 4
            name=_"Beren"
            x=22
            y=20
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            experience={ON_DIFFICULTY4 2 3 4 5}
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Sturmknight
            id=Beren 5
            name=_"Beren"
            x=23
            y=17
            hitpoints={ON_DIFFICULTY4 2 6 10 14}
            experience={ON_DIFFICULTY4 2 3 4 5}
            [modifications]
                {TRAIT_HEALTHY}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Darknite
            id=Beren 6
            name=_"Beren"
            x=20
            y=18
            hitpoints={ON_DIFFICULTY4 2 4 6 8}
            experience={ON_DIFFICULTY4 9 10 11 12}
            [modifications]
                {TRAIT_HEALTHY}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Darknite
            id=Buren 2
            name=_"Buren"
            x=24
            y=13
            hitpoints={ON_DIFFICULTY4 1 2 3 4}
            experience={ON_DIFFICULTY4 10 15 20 25}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/unit]
    [/side]

    #########################
    # SIDE 6 (NE AKLADIANS) #
    #########################
    [side]
        side=6
        id=Boren Rebarnon
        name=_"Boren Rebarnon"
        controller=ai
        canrecruit=yes
        team_name=orcish
        type=Akladian Lord
        facing=sw
        # levels of these units: 0, 1, 2, 1, 2, 3
        recruit=Akladian Clansman,Akladian Warrior,Akladian Light Infantry,Akladian Raider,Akladian Sturmknight,Akladian Darknite
        {GOLD4 180 200 220 240}
        {INCOME4 2 3 4 5}
        [ai]
            {NO_SCOUTS}
            recruitment_pattern=fighter,0,1,2,fighter
            simple_targeting=yes
            caution=0.5
            aggression=0.5
            grouping=offensive
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=7
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 8 9 10 11}
            [/goal]
        [/ai]
        [ai]
            {NO_SCOUTS}
            time_of_day=dusk,first_watch,second_watch
            aggression=1.0
            caution=0.0
            grouping=no
            [goal]
                name=protect_location
                [criteria] #NOTE: this is a SLF, because we're protecting a location
                    x,y=19,23
                [/criteria]
                protect_radius=6
                value={ON_DIFFICULTY4 8 9 10 11}
            [/goal]
            [goal]
                name=target_location
                [criteria]
                    x=19
                    y=23
                [/criteria]
                value={ON_DIFFICULTY4 12 11 10 9}
            [/goal]
        [/ai]
        [unit]
            type=Akladian Darknite
            id=Rebarnon
            name=_"Rebarnon"
            x=16
            y=17
            hitpoints={ON_DIFFICULTY4 3 4 5 6}
            experience={ON_DIFFICULTY4 4 5 6 7}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Raider
            id=Wutan
            name=_"Wutan"
            x=14
            y=16
            hitpoints={ON_DIFFICULTY4 8 9 10 11}
            experience={ON_DIFFICULTY4 9 10 11 12}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Raider
            id=Askarial
            name=_"Askarial"
            x=15
            y=13
            hitpoints={ON_DIFFICULTY4 22 24 26 28}
            experience={ON_DIFFICULTY4 2 3 4 5}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Clansman
            id=Askarial 2
            name=_"Askarial"
            x=13
            y=18
            hitpoints={ON_DIFFICULTY4 4 5 6 7}
            experience={ON_DIFFICULTY4 6 7 8 9}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_FEARLESS}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Clansman
            id=Askarial 3
            name=_"Askarial"
            x=14
            y=18
            hitpoints={ON_DIFFICULTY4 8 9 10 11}
            experience={ON_DIFFICULTY4 6 7 8 9}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Warrior
            id=Askarial 4
            name=_"Askarial"
            x=14
            y=20
            hitpoints={ON_DIFFICULTY4 6 7 8 9}
            experience={ON_DIFFICULTY4 7 8 9 10}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
        [unit]
            type=Akladian Warrior
            id=Askarial 5
            name=_"Askarial"
            x=12
            y=16
            hitpoints={ON_DIFFICULTY4 9 10 11 12}
            experience={ON_DIFFICULTY4 20 21 22 23}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
    [/side]

    ########################
    # BEGIN EVENTS SECTION #
    ########################
    [event]
        name=prestart
#ifdef EASY
        [terrain]
            x,y=11,26
            terrain=Re^Vhr
        [/terrain]
#else
        {PLACE_IMAGE (terrain/burned-village.png) 11 26}
#endif
#ifdef EASY
        [terrain]
            x,y=12,29
            terrain=Gd^Vhr
        [/terrain]
#else
        {PLACE_IMAGE (scenery/village-human-burned1.png) 12 29}
#endif
#ifdef EASY
        [terrain]
            x,y=23,28
            terrain=Gg^Vhr
        [/terrain]
#else
        {PLACE_IMAGE (scenery/village-human-burned2.png) 23 28}
#endif
        {PLACE_IMAGE (scenery/village-human-burned3.png) 15 15}
#ifdef EASY
        [terrain]
            x,y=22,23
            terrain=Re^Vhcr
        [/terrain]
        [capture_village]
            x,y=22,23
            side=2
        [/capture_village]
#else
        {PLACE_IMAGE (terrain/burned-village.png) 22 23}
#endif
        {PLACE_IMAGE (items/orcish-flag.png) 13 27}
        {PLACE_IMAGE (items/orcish-flag.png) 10 25}
        {PLACE_IMAGE (scenery/tent-ruin-1.png) 16 14}
#ifdef EASY
        [terrain]
            x,y=8,25
            terrain=Gg^Vct
        [/terrain]
#endif
#ifdef NORMAL
        # On NORMAL, use some IPFs to distinguish this from a village:
        {PLACE_IMAGE ("terrain/village/camp.png~SEPIA()~FL(horizontal)") 8 25}
#endif
#ifdef HARD
        # On HARD, only use one IPF:
        {PLACE_IMAGE ("terrain/village/camp.png~FL(horizontal)") 8 25}
#endif
#ifdef NIGHTMARE
        # OK to let it be confused for a village on NIGHTMARE:
        {PLACE_IMAGE (terrain/village/camp.png) 8 25}
#endif
        {PLACE_IMAGE (scenery/castle-ruins.png) 20 25}
        {PLACE_IMAGE (scenery/castle-ruins.png) 23 23}
        {PLACE_IMAGE (items/bones.png) 20 27}
        {PLACE_IMAGE (items/bones.png) 11 31}
        {PLACE_IMAGE (items/meniouabandoned-fire_168.png) 17 13}
        {RECALL (Ruvio)}
        {RECALL (Lady Lorin)}
        {IF_HAVE_UNIT_ANY (Reme Carrenemoe)}
        {RECALL (Reme Carrenemoe)}
        {END_IF_WITHOUT_ELSE}
        {TELEPORT (Lady Lorin) 5 38}
        {TELEPORT (Reme Carrenemoe) 4 37}
        {IF_HAVE_UNIT_ANY (Reumario)}
        {RECALL (Reumario)}
        {END_IF_WITHOUT_ELSE}
        [modify_unit]
            [filter]
                side=2
                id=Matthias Ramon
                canrecruit=yes
            [/filter]
            goto_x,goto_y=19,23
        [/modify_unit]
        [micro_ai]
            side=2
            ai_type=zone_guardian
            action=add

            [filter]
                [not]
                    id=Matthias Ramon
                [/not]
                [not]
                    canrecruit=yes
                [/not]
            [/filter]
            ca_score=26000 # (low)
            [filter_location]
                x=14-24
                y=19-26
                [or]
                    terrain=Kh,Ch,Chr,Rr,*^Vh*
                [/or]
                [and]
                    [not]
                        terrain=Ww
                    [/not]
                [/and]
            [/filter_location]
            [filter_location_enemy]
                x=12-28
                y=16-27
                [or]
                    terrain=Ww,Gll
                [/or]
            [/filter_location_enemy]
            station_x,station_y=19,23
        [/micro_ai]
        # TODO: maybe also try modifying side 2's movement costs to better suit the play style I've been trying to give them via AI so far...
        [micro_ai]
            side=2
            ai_type=goto
            action=add

            [filter]
                id=Matthias Ramon
                canrecruit=yes
            [/filter]
            [filter_location]
                x,y=19,23
            [/filter_location]
            [avoid]
                terrain=W*,Gll
            [/avoid]
        [/micro_ai]
        # Replacement for attack_depth being removed:
        [micro_ai]
            side=3
            ai_type=wolves_multipacks
            action=add
            type=Wolf Rider

#ifdef DEBUG_MODE
            show_pack_number=yes
#endif
            pack_size={ON_DIFFICULTY4 1 2 3 4}
        [/micro_ai]
    [/event]

    [event]
        name=start
        {VARIABLE ano_strateg_pos 2}
        {VARIABLE ano_oracle_visited yes}
        {MESSAGE (Boren Rebarnon) () (_"Boren Rebarnon") _"Remember, the Oracle must be untouched. Do not kill the woman. Bor Cryne wants to have her untouched."}
        {MESSAGE (Burke Barien)  () (_"Burke Barien") _"Bor Cryne may desire whatever he wants. But the holy Oracle will be a 'guest' of the noble lord Uri van Roe."}
        {MESSAGE (Fat Bart) () (_"Fat Bart") _"You two can settle that later. Everything else inside the city will belong to us!"}
        {MESSAGE (Baruk Urk) () (_"Baruk Urk") _"Ha, ha, human. You mean, 'everything we leave' will be yours."}
        {MESSAGE (Boren Rebarnon) () (_"Boren Rebarnon") _"Wait, I think someone is trying to help the besieged."}
        {MESSAGE (Matthias Ramon) () (_"Matthias Ramon") _"The Oracle was right, as always! Relief is coming! Fight harder, men, we must hold out long enough for relief to arrive!"}
        [modify_unit]
            [filter]
                side=1
            [/filter]
            facing=ne
        [/modify_unit]
        [objectives]
            side=1
            [objective]
                description=_"Kill all enemy leaders"
                condition=win
            [/objective]
            [objective]
                description=_"Any enemy unit reaches the keep of the Oracle."
                condition=lose
            [/objective]
            [objective]
                description=_"Death of Gawen Hagarthen"
                condition=lose
            [/objective]
            [objective]
                description=_"Death of Ruvio"
                condition=lose
            [/objective]
            [objective]
                description=_"Death of Lady Lorin"
                condition=lose
            [/objective]
            {TURNS_RUN_OUT}
#ifdef EASY
            #po: EASY difficulty, so be more explicit about how things work:
            {OBJECTIVE_NOTES _"The scenario will continue even if Matthias Ramon dies. It is the keep upon which he stands that requires greater protection."}
#else
            #po: NORMAL, HARD, or NIGHTMARE difficulty, so this should just be a description of mechanics instead of having any sort of hint-like qualities:
            {OBJECTIVE_NOTES _"The scenario will continue even if Matthias Ramon dies."}
#endif
            [note]
                description=_"There are no interrogations in this scenario."
            [/note]
        [/objectives]
    [/event]

    [event]
        name=attack
        [filter]
            side=2 # (your AI allies)
        [/filter]
        [filter_second]
            canrecruit=yes
            [filter_side]
                team_name=orcish
            [/filter_side]
        [/filter_second]
        # If adding first_time_only=no, do something to ensure this isn't the same message every time:
        {MESSAGE (second_unit) () ($second_unit.name) _"Yikes, this Oracle is better defended than we expected! Let's get some gold together for some more reinforcements!"}
        [gold]
            side=3,4,5,6
            amount={ON_DIFFICULTY4 20 40 60 80}
        [/gold]
    [/event]

    [event]
        name=attack
        [filter_second]
            id=Matthias Ramon
        [/filter_second]
        {MESSAGE (Matthias Ramon) () (_"Matthias Ramon") _"I am under attack! To me, men! We must protect the Oracle together!"}
        [message]
            side=2
            # Make sure he is not talking to himself:
            [not]
                id=Matthias Ramon
            [/not]
            message=_"On our way, sir!"
        [/message]
        [gold]
            side=2
            amount={ON_DIFFICULTY4 60 50 40 30}
        [/gold]
        [modify_side]
            side=2
            # Make sure to keep this higher than their starting income of {6 5 4 3}:
            {INCOME4 10 9 8 7}
        [/modify_side]
        [move_unit]
            side=2
            to_x=19
            to_y=23
        [/move_unit]
    [/event]

    # TODO: add some dialogue for when your own units move next to Matthias Ramon
    # Have him explain that you can't see the Oracle until the attackers are defeated

    [event]
        name=last breath
        [filter]
            id=Matthias Ramon
        [/filter]
        {MESSAGE (Matthias Ramon) () (_"Matthias Ramon") _"The attackers have slain me! Hurry, to my keep, men! You must protect the Oracle for me in my stead!"}
    [/event]

    [event]
        name=moveto
        [filter]
            [not]
                side=1
            [/not]
            [not]
                side=2
            [/not]
            x=19
            y=23
        [/filter]
        {MSG_unit _"I found her! I found her! The Oracle!"}
        {MSG_Ruvio _"All is lost! They captured the Oracle!"}
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
        name=time over
        [scroll_to]
            x,y=9,28 # Baruk Urk's keep
        [/scroll_to]
        [lock_view][/lock_view]
        {SCATTER_UNITS 20 "Orcish Shaman,Orcish Slurbow,Orcish Warlord,Direwolf Rider,Troll Warrior,Troll Rocklobber" 1 (
            x=1-11
            y=22-30

            [not]
                terrain=Ww
            [/not]

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=3 # Baruk Urk (orcs)
            generate_name=yes
            random_traits=yes
        )}
        [redraw][/redraw]
        [delay]
            time=345
        [/delay]
        [unlock_view][/unlock_view]
        [scroll_to]
            x,y=22,33 # Fat Bart's keep
        [/scroll_to]
        [lock_view][/lock_view]
        {SCATTER_UNITS 25 "Outlaw Raider,Outlaw,Highwayman,Assassin,Huntsman,Ranger" 2 (
            x=17-28
            y=30-40

            [not]
                terrain=Ww
            [/not]

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=4 # Fat Bart (outlaws)
            generate_name=yes
            random_traits=yes
        )}
        [redraw][/redraw]
        [delay]
            time=345
        [/delay]
        [unlock_view][/unlock_view]
        [scroll_to]
            x,y=8,5 # Burke Barien's keep
        [/scroll_to]
        [lock_view][/lock_view]
        {SCATTER_UNITS 30 "Akladian Protector,Akladian Darknite,Akladian Fastfoot,Akladian Pikeneer" 3 (
            x=1-14
            y=1-19

            [not]
                terrain=Ww
            [/not]

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=5 # Burke Barien (NW Akladians)
            generate_name=yes
            random_traits=yes
        )}
        [redraw][/redraw]
        [delay]
            time=345
        [/delay]
        [unlock_view][/unlock_view]
        [scroll_to]
            x,y=23,10 # Boren Rebarnon's keep
        [/scroll_to]
        [lock_view][/lock_view]
        {SCATTER_UNITS 30 "Akladian Protector,Akladian Darknite,Akladian Fastfoot,Akladian Pikeneer" 3 (
            x=15-28
            y=1-18

            [not]
                terrain=Ww
            [/not]

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=6 # Boren Rebarnon (NE Akladians)
            generate_name=yes
            random_traits=yes
        )}
        [redraw][/redraw]
        [delay]
            time=345
        [/delay]
        [unlock_view][/unlock_view]
        [scroll_to]
            x,y=19,23 # The castle
        [/scroll_to]
        [lock_view][/lock_view]
        [redraw][/redraw]
        [delay]
            time=345
        [/delay]
        [unlock_view][/unlock_view]
        [scroll_to_unit]
            id=Gawen Hagarthen
        [/scroll_to_unit]
        {MSG_Ruvio _"All is lost! Enemy reinforcements have arrived! We have no chance to win now!"}
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

#define MSG_Oracle _TEXT
    {MESSAGE (Oracle) (portraits/oracle.png) (_"The Oracle") ({_TEXT})}
#enddef

    [event]
        name=victory
        {REPLACE_SCENARIO_MUSIC strings_wings_and_things.ogg}
        {APPEND_MUSIC strings_wings_and_things.ogg}
        #po: The "o" in "oracle" is intentionally lowercase here so that Ruvio can correct Gawen in the line after this.
        #po: (I'm not sure how Ruvio can tell case when they're supposed to be speaking aloud, but let's ignore that for now)
        {MSGm_Gawen _"We've won! At last. Now, where is that famous oracle?"}
        #po: if your language doesn't have articles or capitalization, come up with some other sort of linguistic cue to signify that
        #po: 'The Oracle' is special, like a unique honoriffic (if you language has those) or something:
        {MSG_Ruvio _"You pronounce that 'The Oracle'... all she needs is a great big 'The' in front and a capital O. But indeed, where is she?"}
        [unit]
            type=Oracle
            id=Oracle
            name=_"Oracle"
            profile=portraits/oracle.png
            x=19
            y=23
            side=2
        [/unit]
        [scroll_to_unit]
            id=Oracle
            highlight=yes
        [/scroll_to_unit]
        [delay]
            time=100
        [/delay]
        #po: carets blank EVERYTHING before them, rather than just the preceding word, so that is why I replaced "plural^you" with "all of you" here:
        {MSG_Oracle _"Here I am. My voice speaks to those willing to listen. I know why you are here. I know who all of you are. Ask your questions and receive the answers, for I can see everything which may be."}
        {MSGm_Lorin _"Everything, huh? Then how come you were besieged and almost captured? Why didn't you escape or call on someone to help you?"}
        {MSG_Oracle _"The answer to this question is the answer to your doubts. Why haven't I escaped? Why didn't I call someone for help?"}
        {MSGm_Gawen _"Lady, we are searching for the great mage, Deorien. Maybe you know..."}

        #po: Note to translators: This is archaic English, 'thee' and 'thou' are the singular familiar forms of 'you' - 'crieth' and 'recalleth' are old English for 'cries' and 'recalls'... 'e'en' is a poetic way of saying 'even'
        {MSG_Oracle _"Search for Deorien in the ruins of the great city, where e'en the wind crieth when it recalleth the memories of a marvelous past. He shall give unto thee answers, some of which thou mayest find unwelcome."}

        {MSGm_Gawen _"Ruins of the great city? What kind of answer is this? Which city? Why can't you give me straight answers?"}
        {MSG_Oracle _"I am an Oracle. Why should I give straight answers? Why do you think my answer is insufficient for you? Why do you think I should tell you more?"}
        {MSGm_Lorin _"Oracle... I..."}

        #po: If you are translating the Oracle's answers, and if you are not sure what Lorin's questions were, contact the campaign creator. The answers might not involve "to be" in some languages.
        #po: Note to translators: This sentence incorporates quite a bit of archaic English. 'Yea' is old English for yes and 'thou' is the familiar/intimate form of a singular 'you'... 'ye' in the third answer is the old English familliar, plural form of 'you' - and 'nay' is old English for 'no.'
        {MSG_Oracle _"I already know your questions, Lorin from Gallorae, the clan which has long had more gold in the hair of their daughters than in their treasuries. The first answer is: yea, thou art. The second is: yea, he shall. The third is: nay, ye never shall."}

        {MSGm_Lorin _"No! No!  There has to be a better answer!"}
        {MSG_Oracle _"As the Oracle, I have nothing more to say to thee... As a woman, I can advise this: There is only one man in the world who may change your future. I think you know his name. Go and find him. Beg him for forgiveness if you have to. Stay with him as long as you can."}
        #po: FIXME: this wording could be improved... basically Lorin is saying she accepts the answers the Oracle gave with her Oracle hat on, but not the advice she gave on a woman-to-woman basis:
        {MSGm_Lorin _"Is that all you wanted to tell me? Then know that I've heard, that the She-wolf of Haeltin has heard counsel of the Oracle, voice of God on Earth. She will not hear the counsel woman whom is merely God's tool."}
        {MSGm_Lorin _"Let's go, Gawen. We're finished here."}
        {MSGm_Gawen _"I didn't catch the meaning of the discussion between you, and I know it was important. But why?"}

        #po: 'import' is an older English term for 'Importance'
        {MSG_Oracle _"You shall understand the full import of it one day, young king, and I daresay sooner than you think. I wish you luck in your quest. I will give one of my sergeants into your service. He will serve you loyally."}

        [unit]
            x=19
            y=19
            type=Sergeant
            id=John Fasthood
            name=_"John Fasthood"
            side=1
            [modifications]
                {TRAIT_LOYAL}
#ifdef NIGHTMARE
                {TRAIT_QUICK}
#else
                {TRAIT_STRONG}
#endif
            [/modifications]
        [/unit]
        [delay]
            time=100
        [/delay]
        [kill]
            type=Oracle
            side=2
        [/kill]
        [delay]
            time=100
        [/delay]
        # (maybe disallow recruiting of Fencers again here?)
    [/event]

    # By Turn 6, the Akladians should reach the Oracle.
    # Normally, a skilled player would finish by turn 17.
    # To make things a bit more interesting, we add some
    # gold to the northern AI sides:
    [event]
        name=turn 7
        [gold]
            amount={ON_DIFFICULTY4 10 15 20 25}
            side=5
        [/gold]
        [gold]
            amount={ON_DIFFICULTY4 10 15 20 25}
            side=6
        [/gold]
        [if]
            [have_unit]
                id=Baruk Urk
                type=Orcish Warlord
                canrecruit=yes
                side=3
            [/have_unit]
            [then]
                [gold]
                    amount={ON_DIFFICULTY4 8 9 10 11}
                    side=3
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                id=Fat Bart
                type=Fugitive
                canrecruit=yes
                side=4
            [/have_unit]
            [then]
                [gold]
                    amount={ON_DIFFICULTY4 8 9 10 11}
                    side=4
                [/gold]
            [/then]
        [/if]
    [/event]

    [event]
        name=turn 10
        [gold]
            amount={ON_DIFFICULTY4 6 8 10 12}
            side=5
        [/gold]
        [gold]
            amount={ON_DIFFICULTY4 6 8 10 12}
            side=6
        [/gold]
        [if]
            [have_unit]
                id=Baruk Urk
                type=Orcish Warlord
                canrecruit=yes
                side=3
            [/have_unit]
            [then]
                [gold]
                    amount={ON_DIFFICULTY4 3 4 5 6}
                    side=3
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                id=Fat Bart
                type=Fugitive
                canrecruit=yes
                side=4
            [/have_unit]
            [then]
                [gold]
                    amount={ON_DIFFICULTY4 3 4 5 6}
                    side=4
                [/gold]
            [/then]
        [/if]
    [/event]

    [event]
        name=turn 15
        [gold]
            amount={ON_DIFFICULTY4 3 4 5 6}
            side=5
        [/gold]
        [gold]
            amount={ON_DIFFICULTY4 3 4 5 6}
            side=6
        [/gold]
    [/event]

    {ALL_ANO_DEATHS}
    {ELVISH_DEATHS}
    {ELVISH_KILLING}
[/scenario]
